<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Restore Applications :: Applications backups &amp; restores in OpenShift</title>
    <link rel="canonical" href="https://aliciamaroto.github.io/oadp-webinar-2023/applications-backups-restores/04-restores.html">
    <link rel="prev" href="03-backups.html">
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img src="../_/img/NewRHDFullLogo_4-color_white-wordmark.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="https://aliciamaroto.github.io/oadp-webinar-2023">Applications backups &amp; restores in OpenShift</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://developers.redhat.com/ebooks/" target="_blank">Books</a>
        <a class="navbar-item" href="https://developers.redhat.com/cheatsheets/" target="_blank">Cheat Sheets</a>
        <a class="navbar-item" href="https://developers.redhat.com/events/" target="_blank">Upcoming Events</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/kubernetes-tutorial/" target="_blank">Kubernetes</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/istio-tutorial/" target="_blank">Istio</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/quarkus-tutorial/" target="_blank">Quarkus</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/knative-tutorial/" target="_blank">Knative</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/tekton-tutorial/" target="_blank">Tekton</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="applications-backups-restores" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html"></a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="01-setup.html">1. Lab Setup</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-setup.html#prerequisite">Prerequisites</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-setup.html#clustersetup">Cluster Setup</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="02-deploy.html">2. Install and configure OADP Operator</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-deploy.html#install">Install Operator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-deploy.html#configure">Configure Operator</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="03-backups.html">3. Create Application Backups</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-backups.html#app1">Application 1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-backups.html#app2">Application 2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-backups.html#app3">Application 3</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-backups.html#app4">Application 4</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="04-restores.html">4. Restore Applications</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#simple">Restore simple application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#snapshot">Restore application with persistent storage using Snaphsots</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#restic">Restore application with persistent storage using Restic</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#datamover">Restore application with persistent storage using Data Mover</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Applications backups & restores in OpenShift</a></li>
    <li><a href="04-restores.html">4. Restore Applications</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/aliciamaroto/oadp-webinar-2023/edit/master/documentation/modules/ROOT/pages/04-restores.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">Restore Applications</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>In this last section we are going to perform the restores of the previous backed up applications. In order to check that the restores of the backups have been done successfully, we ned to simulate a disaster scenario. To do so, we are going to delete the namespaces created in the previous section.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/restores/restore.png" alt="restore">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="simple"><a class="anchor" href="#simple"></a>Restore simple application</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Firstly, delete the <code>application-01</code> namespace.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>oc delete project application-01</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Create a new Restore resource, specifying the namespace we want to restore. The yaml view of the resource will look like this:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: velero.io/v1
kind: Restore
metadata:
  name: restore-app01
  namespace: openshift-adp
spec:
  backupName: backup-app01</code></pre>
</div>
</div>
<div class="paragraph">
<p>In order to check that the restore has finished successfully, it has to be marked as <strong>Completed</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/restores/app01-1.png" alt="app01 1">
</div>
</div>
<div class="paragraph">
<p>And the <code>application-01</code> project has to be available again in the cluster.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>oc project application-01</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="snapshot"><a class="anchor" href="#snapshot"></a>Restore application with persistent storage using Snapshots</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Firstly, delete the <code>application-02</code> namespace.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>oc delete project application-02</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Create a new Restore resource, specifying the namespace we want to restore and making sure that the option <code>restorePVs</code> is set to <code>true</code>. The yaml view of the resource will look like this:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: velero.io/v1
kind: Restore
metadata:
  name: restore-app02
  namespace: openshift-adp
spec:
  backupName: backup-app02
  restorePVs: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>In order to check that the restore has finished successfully, it has to be marked as <strong>Completed</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/restores/app02-1.png" alt="app02 1">
</div>
</div>
<div class="paragraph">
<p>And the <code>application-02</code> project has to be available again in the cluster.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>oc project application-02</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="restic"><a class="anchor" href="#restic"></a>Restore application with persistent storage using Restic</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Firstly, delete the <code>application-03</code> namespace.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>oc delete project application-03</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Create a new Restore resource, specifying the namespace we want to restore. In this case, we do not have to enable the <code>restorePVs</code> option as we performed the backup using <code>Restic</code>. The yaml view of the resource will look like this:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: velero.io/v1
kind: Restore
metadata:
  name: restore-app03
  namespace: openshift-adp
spec:
  backupName: backup-app03</code></pre>
</div>
</div>
<div class="paragraph">
<p>In order to check that the restore has finished successfully, it has to be marked as <strong>Completed</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/restores/app03-1.png" alt="app03 1">
</div>
</div>
<div class="paragraph">
<p>And the <code>application-03</code> project has to be available again in the cluster.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>oc project application-03</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="datamover"><a class="anchor" href="#datamover"></a>Restore application with persistent storage using Data Mover</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Firstly, delete the <code>application-04</code> namespace.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>oc delete project application-04</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Create a new Restore resource, specifying the namespace we want to restore and making sure that the option <code>restorePVs</code> is set to <code>true</code> as in the second example. The yaml view of the resource will look like this:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: velero.io/v1
kind: Restore
metadata:
  name: restore-app04
  namespace: openshift-adp
spec:
  backupName: backup-app04
  restorePVs: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>In order to check that the restore has finished successfully, it has to be marked as <strong>Completed</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/restores/app04-1.png" alt="app04 1">
</div>
</div>
<div class="paragraph">
<p>And the <code>application-04</code> project has to be available again in the cluster.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>oc project application-04</pre>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="03-backups.html">3. Create Application Backups</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../_/js/vendor/clipboard.js"></script>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
